module test.nm32.nm32_gen05;

import std.stdio;
import std.string;
import std.exception;
import xbyak;
import test.test_count;

version (X86) version = XBYAK32;
version (X86_64) version = XBYAK64;

version (XBYAK32)
{

    @("nm32_gen05")
    unittest
    {
        class gen05 : CodeGenerator
        {
            TestCount testCount;

            void sdump(string hexStr, string file = __FILE__, size_t line = __LINE__)
            {
                if (hexStr.length == 0)
                {
                    dump();
                    size_ = 0;
                    return;
                }

                const size_t n = this.getSize();
                auto ctbl = this.getCode();

                string hexCode;
                for (size_t i = 0; i < n; i++)
                {
                    hexCode ~= format("%02X", ctbl[i]);
                }

                testCount.TEST_EQUAL(hexCode, hexStr, file, line);
                size_ = 0;
                return;
            }

            ~this()
            {
                testCount.end("nm32_gen05");
            }

            this()
            {
                testCount.reset();

                addps(xmm2, xmm6);
                sdump("0F58D6");
                addps(xmm5, ptr[eax + ecx + 3]);
                sdump("0F586C0803");
                addss(xmm5, xmm3);
                sdump("F30F58EB");
                addss(xmm7, ptr[eax + ecx + 3]);
                sdump("F30F587C0803");
                addpd(xmm2, xmm7);
                sdump("660F58D7");
                addpd(xmm4, ptr[eax + ecx + 3]);
                sdump("660F58640803");
                addsd(xmm1, xmm3);
                sdump("F20F58CB");
                addsd(xmm4, ptr[eax + ecx + 3]);
                sdump("F20F58640803");
                andnps(xmm0, xmm7);
                sdump("0F55C7");
                andnps(xmm3, ptr[eax + ecx + 3]);
                sdump("0F555C0803");
                andnpd(xmm6, xmm6);
                sdump("660F55F6");
                andnpd(xmm6, ptr[eax + ecx + 3]);
                sdump("660F55740803");
                andps(xmm5, xmm4);
                sdump("0F54EC");
                andps(xmm1, ptr[eax + ecx + 3]);
                sdump("0F544C0803");
                andpd(xmm0, xmm1);
                sdump("660F54C1");
                andpd(xmm3, ptr[eax + ecx + 3]);
                sdump("660F545C0803");
                cmpps(xmm5, xmm0, 4);
                sdump("0FC2E804");
                cmpps(xmm3, xmm1, 0xda);
                sdump("0FC2D9DA");
                cmpps(xmm0, ptr[eax + ecx + 3], 4);
                sdump("0FC244080304");
                cmpps(xmm4, ptr[eax + ecx + 3], 0xda);
                sdump("0FC2640803DA");
                cmpss(xmm5, xmm2, 4);
                sdump("F30FC2EA04");
                cmpss(xmm4, xmm7, 0xda);
                sdump("F30FC2E7DA");
                cmpss(xmm0, ptr[eax + ecx + 3], 4);
                sdump("F30FC244080304");
                cmpss(xmm7, ptr[eax + ecx + 3], 0xda);
                sdump("F30FC27C0803DA");
                cmppd(xmm2, xmm3, 4);
                sdump("660FC2D304");
                cmppd(xmm2, xmm5, 0xda);
                sdump("660FC2D5DA");
                cmppd(xmm3, ptr[eax + ecx + 3], 4);
                sdump("660FC25C080304");
                cmppd(xmm7, ptr[eax + ecx + 3], 0xda);
                sdump("660FC27C0803DA");
                cmpsd(xmm5, xmm2, 4);
                sdump("F20FC2EA04");
                cmpsd(xmm7, xmm4, 0xda);
                sdump("F20FC2FCDA");
                cmpsd(xmm4, ptr[eax + ecx + 3], 4);
                sdump("F20FC264080304");
                cmpsd(xmm1, ptr[eax + ecx + 3], 0xda);
                sdump("F20FC24C0803DA");
                divps(xmm0, xmm2);
                sdump("0F5EC2");
                divps(xmm3, ptr[eax + ecx + 3]);
                sdump("0F5E5C0803");
                divss(xmm2, xmm5);
                sdump("F30F5ED5");
                divss(xmm6, ptr[eax + ecx + 3]);
                sdump("F30F5E740803");
                divpd(xmm1, xmm1);
                sdump("660F5EC9");
                divpd(xmm4, ptr[eax + ecx + 3]);
                sdump("660F5E640803");
                divsd(xmm4, xmm5);
                sdump("F20F5EE5");
                divsd(xmm4, ptr[eax + ecx + 3]);
                sdump("F20F5E640803");
                maxps(xmm5, xmm6);
                sdump("0F5FEE");
                maxps(xmm3, ptr[eax + ecx + 3]);
                sdump("0F5F5C0803");
                maxss(xmm0, xmm5);
                sdump("F30F5FC5");
                maxss(xmm0, ptr[eax + ecx + 3]);
                sdump("F30F5F440803");
                maxpd(xmm5, xmm3);
                sdump("660F5FEB");
                maxpd(xmm0, ptr[eax + ecx + 3]);
                sdump("660F5F440803");
                maxsd(xmm4, xmm4);
                sdump("F20F5FE4");
                maxsd(xmm5, ptr[eax + ecx + 3]);
                sdump("F20F5F6C0803");
                minps(xmm7, xmm0);
                sdump("0F5DF8");
                minps(xmm2, ptr[eax + ecx + 3]);
                sdump("0F5D540803");
                minss(xmm4, xmm1);
                sdump("F30F5DE1");
                minss(xmm1, ptr[eax + ecx + 3]);
                sdump("F30F5D4C0803");
                minpd(xmm2, xmm4);
                sdump("660F5DD4");
                minpd(xmm1, ptr[eax + ecx + 3]);
                sdump("660F5D4C0803");
                minsd(xmm1, xmm6);
                sdump("F20F5DCE");
                minsd(xmm6, ptr[eax + ecx + 3]);
                sdump("F20F5D740803");
                mulps(xmm5, xmm7);
                sdump("0F59EF");
                mulps(xmm5, ptr[eax + ecx + 3]);
                sdump("0F596C0803");
                mulss(xmm5, xmm4);
                sdump("F30F59EC");
                mulss(xmm4, ptr[eax + ecx + 3]);
                sdump("F30F59640803");
                mulpd(xmm0, xmm5);
                sdump("660F59C5");
                mulpd(xmm5, ptr[eax + ecx + 3]);
                sdump("660F596C0803");
                mulsd(xmm0, xmm3);
                sdump("F20F59C3");
                mulsd(xmm6, ptr[eax + ecx + 3]);
                sdump("F20F59740803");
                orps(xmm2, xmm1);
                sdump("0F56D1");
                orps(xmm5, ptr[eax + ecx + 3]);
                sdump("0F566C0803");
                orpd(xmm0, xmm5);
                sdump("660F56C5");
                orpd(xmm1, ptr[eax + ecx + 3]);
                sdump("660F564C0803");
                rcpps(xmm1, xmm3);
                sdump("0F53CB");
                rcpps(xmm0, ptr[eax + ecx + 3]);
                sdump("0F53440803");
                rcpss(xmm1, xmm4);
                sdump("F30F53CC");
                rcpss(xmm6, ptr[eax + ecx + 3]);
                sdump("F30F53740803");
                rsqrtps(xmm4, xmm4);
                sdump("0F52E4");
                rsqrtps(xmm0, ptr[eax + ecx + 3]);
                sdump("0F52440803");
                rsqrtss(xmm7, xmm3);
                sdump("F30F52FB");
                rsqrtss(xmm7, ptr[eax + ecx + 3]);
                sdump("F30F527C0803");
                shufps(xmm0, xmm5, 4);
                sdump("0FC6C504");
                shufps(xmm0, xmm6, 0xda);
                sdump("0FC6C6DA");
                shufps(xmm6, ptr[eax + ecx + 3], 4);
                sdump("0FC674080304");
                shufps(xmm1, ptr[eax + ecx + 3], 0xda);
                sdump("0FC64C0803DA");
                shufpd(xmm7, xmm6, 4);
                sdump("660FC6FE04");
                shufpd(xmm6, xmm1, 0xda);
                sdump("660FC6F1DA");
                shufpd(xmm0, ptr[eax + ecx + 3], 4);
                sdump("660FC644080304");
                shufpd(xmm6, ptr[eax + ecx + 3], 0xda);
                sdump("660FC6740803DA");
                sqrtps(xmm0, xmm1);
                sdump("0F51C1");
                sqrtps(xmm6, ptr[eax + ecx + 3]);
                sdump("0F51740803");
                sqrtss(xmm4, xmm6);
                sdump("F30F51E6");
                sqrtss(xmm5, ptr[eax + ecx + 3]);
                sdump("F30F516C0803");
                sqrtpd(xmm1, xmm5);
                sdump("660F51CD");
                sqrtpd(xmm4, ptr[eax + ecx + 3]);
                sdump("660F51640803");
                sqrtsd(xmm4, xmm0);
                sdump("F20F51E0");
                sqrtsd(xmm7, ptr[eax + ecx + 3]);
                sdump("F20F517C0803");
                subps(xmm0, xmm4);
                sdump("0F5CC4");
                subps(xmm2, ptr[eax + ecx + 3]);
                sdump("0F5C540803");
                subss(xmm3, xmm4);
                sdump("F30F5CDC");
                subss(xmm4, ptr[eax + ecx + 3]);
                sdump("F30F5C640803");
                subpd(xmm4, xmm4);
                sdump("660F5CE4");
                subpd(xmm1, ptr[eax + ecx + 3]);
                sdump("660F5C4C0803");
                subsd(xmm0, xmm3);
                sdump("F20F5CC3");
                subsd(xmm7, ptr[eax + ecx + 3]);
                sdump("F20F5C7C0803");
                unpckhps(xmm4, xmm4);
                sdump("0F15E4");
                unpckhps(xmm7, ptr[eax + ecx + 3]);
                sdump("0F157C0803");
                unpckhpd(xmm0, xmm2);
                sdump("660F15C2");
                unpckhpd(xmm2, ptr[eax + ecx + 3]);
                sdump("660F15540803");
                unpcklps(xmm0, xmm4);
                sdump("0F14C4");
                unpcklps(xmm3, ptr[eax + ecx + 3]);
                sdump("0F145C0803");
                unpcklpd(xmm3, xmm2);
                sdump("660F14DA");
                unpcklpd(xmm6, ptr[eax + ecx + 3]);
                sdump("660F14740803");
                xorps(xmm5, xmm1);
                sdump("0F57E9");
                xorps(xmm1, ptr[eax + ecx + 3]);
                sdump("0F574C0803");
                xorpd(xmm3, xmm5);
                sdump("660F57DD");
                xorpd(xmm1, ptr[eax + ecx + 3]);
                sdump("660F574C0803");
                punpckhqdq(xmm1, xmm1);
                sdump("660F6DC9");
                punpckhqdq(xmm6, ptr[eax + ecx + 3]);
                sdump("660F6D740803");
                punpcklqdq(xmm4, xmm4);
                sdump("660F6CE4");
                punpcklqdq(xmm7, ptr[eax + ecx + 3]);
                sdump("660F6C7C0803");
                comiss(xmm6, xmm5);
                sdump("0F2FF5");
                comiss(xmm6, ptr[eax + ecx + 3]);
                sdump("0F2F740803");
                ucomiss(xmm7, xmm1);
                sdump("0F2EF9");
                ucomiss(xmm1, ptr[eax + ecx + 3]);
                sdump("0F2E4C0803");
                comisd(xmm4, xmm2);
                sdump("660F2FE2");
                comisd(xmm2, ptr[eax + ecx + 3]);
                sdump("660F2F540803");
                ucomisd(xmm2, xmm6);
                sdump("660F2ED6");
                ucomisd(xmm2, ptr[eax + ecx + 3]);
                sdump("660F2E540803");
                cvtpd2ps(xmm5, xmm3);
                sdump("660F5AEB");
                cvtpd2ps(xmm5, ptr[eax + ecx + 3]);
                sdump("660F5A6C0803");
                cvtps2pd(xmm1, xmm4);
                sdump("0F5ACC");
                cvtps2pd(xmm7, ptr[eax + ecx + 3]);
                sdump("0F5A7C0803");
                cvtsd2ss(xmm4, xmm3);
                sdump("F20F5AE3");
                cvtsd2ss(xmm0, ptr[eax + ecx + 3]);
                sdump("F20F5A440803");
                cvtss2sd(xmm7, xmm6);
                sdump("F30F5AFE");
                cvtss2sd(xmm0, ptr[eax + ecx + 3]);
                sdump("F30F5A440803");
                cvtpd2dq(xmm3, xmm5);
                sdump("F20FE6DD");
                cvtpd2dq(xmm3, ptr[eax + ecx + 3]);
                sdump("F20FE65C0803");
                cvttpd2dq(xmm6, xmm2);
                sdump("660FE6F2");
                cvttpd2dq(xmm1, ptr[eax + ecx + 3]);
                sdump("660FE64C0803");
                cvtdq2pd(xmm2, xmm1);
                sdump("F30FE6D1");
                cvtdq2pd(xmm1, ptr[eax + ecx + 3]);
                sdump("F30FE64C0803");
                cvtps2dq(xmm0, xmm2);
                sdump("660F5BC2");
                cvtps2dq(xmm1, ptr[eax + ecx + 3]);
                sdump("660F5B4C0803");
                cvttps2dq(xmm6, xmm6);
                sdump("F30F5BF6");
                cvttps2dq(xmm5, ptr[eax + ecx + 3]);
                sdump("F30F5B6C0803");
                cvtdq2ps(xmm1, xmm4);
                sdump("0F5BCC");
                cvtdq2ps(xmm6, ptr[eax + ecx + 3]);
                sdump("0F5B740803");
                addsubpd(xmm6, xmm6);
                sdump("660FD0F6");
                addsubpd(xmm4, ptr[eax + ecx + 3]);
                sdump("660FD0640803");
                addsubps(xmm5, xmm2);
                sdump("F20FD0EA");
                addsubps(xmm0, ptr[eax + ecx + 3]);
                sdump("F20FD0440803");
                haddpd(xmm7, xmm3);
                sdump("660F7CFB");
                haddpd(xmm2, ptr[eax + ecx + 3]);
                sdump("660F7C540803");
                haddps(xmm4, xmm2);
                sdump("F20F7CE2");
                haddps(xmm5, ptr[eax + ecx + 3]);
                sdump("F20F7C6C0803");
                hsubpd(xmm1, xmm4);
                sdump("660F7DCC");
                hsubpd(xmm2, ptr[eax + ecx + 3]);
                sdump("660F7D540803");
                hsubps(xmm7, xmm4);
                sdump("F20F7DFC");
                hsubps(xmm4, ptr[eax + ecx + 3]);
                sdump("F20F7D640803");
                movddup(xmm0, xmm2);
                sdump("F20F12C2");
                movddup(xmm3, ptr[eax + ecx + 3]);
                sdump("F20F125C0803");
                movshdup(xmm4, xmm1);
                sdump("F30F16E1");
                movshdup(xmm7, ptr[eax + ecx + 3]);
                sdump("F30F167C0803");
                movsldup(xmm6, xmm3);
                sdump("F30F12F3");
                movsldup(xmm5, ptr[eax + ecx + 3]);
                sdump("F30F126C0803");
                cvtpi2ps(xmm6, mm6);
                sdump("0F2AF6");
                cvtpi2ps(xmm0, ptr[eax + ecx + 3]);
                sdump("0F2A440803");
                cvtps2pi(mm2, xmm3);
                sdump("0F2DD3");
                cvtps2pi(mm0, ptr[eax + ecx + 3]);
                sdump("0F2D440803");
                cvtsi2ss(xmm3, ptr[eax + ecx + 3]);
                sdump("F30F2A5C0803");
                cvtsi2ss(xmm3, esp);
                sdump("F30F2ADC");
                cvtsi2ss(xmm2, eax);
                sdump("F30F2AD0");
                cvtss2si(esp, xmm1);
                sdump("F30F2DE1");
                cvtss2si(ecx, ptr[eax + ecx + 3]);
                sdump("F30F2D4C0803");
                cvtss2si(eax, xmm0);
                sdump("F30F2DC0");
                cvtss2si(eax, ptr[eax + ecx + 3]);
                sdump("F30F2D440803");
                cvttps2pi(mm0, xmm2);
                sdump("0F2CC2");
                cvttps2pi(mm7, ptr[eax + ecx + 3]);
                sdump("0F2C7C0803");
                cvttss2si(esp, xmm6);
                sdump("F30F2CE6");
                cvttss2si(edx, ptr[eax + ecx + 3]);
                sdump("F30F2C540803");
                cvttss2si(eax, xmm6);
                sdump("F30F2CC6");
                cvttss2si(eax, ptr[eax + ecx + 3]);
                sdump("F30F2C440803");
                cvtpi2pd(xmm2, mm7);
                sdump("660F2AD7");
                cvtpi2pd(xmm1, ptr[eax + ecx + 3]);
                sdump("660F2A4C0803");
                cvtpd2pi(mm3, xmm3);
                sdump("660F2DDB");
                cvtpd2pi(mm6, ptr[eax + ecx + 3]);
                sdump("660F2D740803");
                cvtsi2sd(xmm6, ptr[eax + ecx + 3]);
                sdump("F20F2A740803");
                cvtsi2sd(xmm2, edx);
                sdump("F20F2AD2");
                cvtsi2sd(xmm7, eax);
                sdump("F20F2AF8");
                cvtsd2si(ecx, xmm5);
                sdump("F20F2DCD");
                cvtsd2si(ebx, ptr[eax + ecx + 3]);
                sdump("F20F2D5C0803");
                cvtsd2si(eax, xmm3);
                sdump("F20F2DC3");
                cvtsd2si(eax, ptr[eax + ecx + 3]);
                sdump("F20F2D440803");
                cvttpd2pi(mm1, xmm1);
                sdump("660F2CC9");
                cvttpd2pi(mm1, ptr[eax + ecx + 3]);
                sdump("660F2C4C0803");
                cvttsd2si(ecx, xmm7);
                sdump("F20F2CCF");
                cvttsd2si(edi, ptr[eax + ecx + 3]);
                sdump("F20F2C7C0803");
                cvttsd2si(eax, xmm7);
                sdump("F20F2CC7");
                cvttsd2si(eax, ptr[eax + ecx + 3]);
                sdump("F20F2C440803");
                movhps(xmm7, ptr[eax + ecx + 3]);
                sdump("0F167C0803");
                movhps(ptr[eax + ecx + 3], xmm5);
                sdump("0F176C0803");
                movlps(xmm6, ptr[eax + ecx + 3]);
                sdump("0F12740803");
                movlps(ptr[eax + ecx + 3], xmm7);
                sdump("0F137C0803");
                movhpd(xmm1, ptr[eax + ecx + 3]);
                sdump("660F164C0803");
                movhpd(ptr[eax + ecx + 3], xmm6);
                sdump("660F17740803");
                movlpd(xmm7, ptr[eax + ecx + 3]);
                sdump("660F127C0803");
                movlpd(ptr[eax + ecx + 3], xmm1);
                sdump("660F134C0803");

            }
        }

        scope g5 = new gen05();
    }

}
